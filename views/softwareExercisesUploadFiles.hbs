<!-- begin: Subheader -->
<div class="kt-subheader kt-grid__item" id="kt_subheader">
  <div class="kt-container  kt-container&#45;&#45;fluid ">
    <div class="kt-subheader__main">
      <h3 class="kt-subheader__title">
        能力测评
      </h3>
      <span class="kt-subheader__separator kt-hidden"></span>
      <div class="kt-subheader__breadcrumbs">
        <a href="javascript:;" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
        <span class="kt-subheader__breadcrumbs-separator"></span>
        <a href="javascript:;" class="kt-subheader__breadcrumbs-link">
          软件研发
        </a>
        <span class="kt-subheader__breadcrumbs-separator"></span>
        <a href="javascript:;" class="kt-subheader__breadcrumbs-link">
          测试习题编辑
        </a>
        <span class="kt-subheader__breadcrumbs-separator"></span>
        <a href="javascript:;" class="kt-subheader__breadcrumbs-link">
          上传习题文件
        </a>
      </div>
    </div>
  </div>
</div>
<!-- end: Subheader -->

<!-- begin: Content -->
<div ng-app="pageApp" ng-controller="pageCtrl">
  <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
    <div class="alert alert-primary fade show" role="alert">
      <div class="alert-text">
<!--        <p>习题图片：源文件的每一页作为一张图片，格式为：JPG</p>-->
        <p>习题文档：源文件转为PDF后上传，格式为：PDF</p>
      </div>
      <div class="alert-close">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true"><i class="la la-close"></i></span>
        </button>
      </div>
    </div>
  </div>

  <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
    <div class="kt-portlet kt-portlet--mobile">
      <div class="kt-portlet__head kt-portlet__head--lg">
        <div class="kt-portlet__head-label">
        <span class="kt-portlet__head-icon">
          <i class="kt-font-brand fa fa-graduation-cap"></i>
        </span>
          <h3 class="kt-portlet__head-title">
            测试习题文件上传(\{{model.breadcrumb}})
          </h3>
        </div>
        <div class="kt-portlet__head-toolbar">
          <div class="kt-portlet__head-wrapper">
            <div class="kt-portlet__head-actions">
              <a href="/softwareExercises" class="btn btn-secondary btn-elevate btn-icon-sm">
                <i class="la la-reply"></i>
                返回
              </a>
              <button class="btn btn-brand btn-elevate btn-icon-sm"
                      ng-click="onSave()"
                      ng-disabled="model.documentList.length === 0">
                <i class="la la-save"></i>
                提交
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
    <div class="row">
<!--      <div class="col-md-6">-->
<!--        &lt;!&ndash;begin::Portlet&ndash;&gt;-->
<!--        <div class="kt-portlet">-->
<!--          <div class="kt-portlet__head kt-portlet__head--noborder">-->
<!--            <div class="kt-portlet__head-label">-->
<!--              <h3 class="kt-portlet__head-title">-->
<!--                上传习题图片文件-->
<!--              </h3>-->
<!--            </div>-->
<!--            <div class="kt-portlet__head-toolbar">-->
<!--              <a href="javascript:;" class="btn btn-clean btn-sm btn-icon btn-icon-md" ng-click="onShowUploadImageModal()">-->
<!--                <i class="kt-nav__link-icon flaticon-upload"></i>-->
<!--              </a>-->
<!--            </div>-->
<!--          </div>-->
<!--          <div class="kt-portlet__body">-->
<!--            &lt;!&ndash;begin::Widget &ndash;&gt;-->
<!--            <div class="kt-widget__files">-->
<!--              <ul class="image-list-horizontal" ng-if="model.imageList.length !== 0">-->
<!--                <li ng-repeat="image in model.imageList">-->
<!--                  <div class="kt-avatar kt-avatar--outline" id="kt_user_add_avatar">-->
<!--                    <a ng-href="\{{image.imageUrl}}" target="_blank">-->
<!--                      <div class="kt-avatar__holder" ng-style="{'background-image': 'url(' + image.imageUrl + ')'}"></div>-->
<!--                    </a>-->
<!--                    <a href="javascript:;" class="kt-avatar__upload" ng-click="onRemoveImage(image)">-->
<!--                      <i class="flaticon-delete"></i>-->
<!--                    </a>-->
<!--                    <div class="upload-file-name">-->
<!--                      <a ng-href="\{{image.imageUrl}}" target="_blank" title="\{{image.imageName}}" ng-bind="image.imageName"></a>-->
<!--                    </div>-->
<!--                    <span class="kt-avatar__cancel" data-toggle="kt-tooltip" title="">-->
<!--                      <i class="fa fa-times"></i>-->
<!--                    </span>-->
<!--                  </div>-->
<!--                </li>-->
<!--              </ul>-->
<!--              <div class="kt-widget__media" ng-if="model.imageList.length === 0">-->
<!--                <img class="kt-widget__img kt-hidden-" src="../images/media/jpg.svg" alt="image">-->
<!--              </div>-->
<!--              <span class="kt-widget__desc" ng-if="model.imageList.length === 0">[习题编码]_[顺序编号].jpg</span>-->
<!--            </div>-->

<!--            &lt;!&ndash;end::Widget &ndash;&gt;-->
<!--          </div>-->
<!--        </div>-->
<!--        &lt;!&ndash;end::Portlet&ndash;&gt;-->

<!--      </div>-->
      <div class="col-md-12">
        <!--begin::Portlet-->
        <div class="kt-portlet">
          <div class="kt-portlet__head kt-portlet__head--noborder">
            <div class="kt-portlet__head-label">
              <h3 class="kt-portlet__head-title">
                上传习题PDF源文件
              </h3>
            </div>
            <div class="kt-portlet__head-toolbar">
              <a href="javascript:;" class="btn btn-clean btn-sm btn-icon btn-icon-md" ng-click="onShowUploadDocumentModal()">
                <i class="kt-nav__link-icon flaticon-upload"></i>
              </a>
            </div>
          </div>
          <div class="kt-portlet__body">
            <!--begin::Widget -->
            <div class="kt-widget__files">
              <ul class="image-list-horizontal" ng-if="model.documentList.length !== 0">
                <li ng-repeat="document in model.documentList">
                  <div class="kt-avatar kt-avatar--outline" id="kt_user_add_avatar">
                    <div class="kt-avatar__holder">
                      <a ng-href="\{{document.documentUrl}}" target="_blank">
                        <img src="../images/media/pdf.png" alt="">
                      </a>
                    </div>
                    <a href="javascript:;" class="kt-avatar__upload" ng-click="onRemoveDocument(document)">
                      <i class="flaticon-delete"></i>
                    </a>
                    <div class="upload-file-name text-center">
                      <a ng-href="\{{document.documentUrl}}" target="_blank" title="\{{document.documentName}}" ng-bind="document.documentName"></a>
                      <br>
                      <a ng-href="\{{document.answerGitUrl}}" target="_blank">参考示例</a>
                    </div>
                    <span class="kt-avatar__cancel" data-toggle="kt-tooltip" title="">
                      <i class="fa fa-times"></i>
                    </span>
                  </div>
                </li>
              </ul>

              <div class="kt-widget__media" ng-if="model.documentList.length === 0">
                <img class="kt-widget__img kt-hidden-" src="../images/media/pdf.svg" alt="image">
              </div>
              <span class="kt-widget__desc" ng-if="model.documentList.length === 0">[知识点名称/习题名称]_[顺序编号].pdf</span>
            </div>

            <!--end::Widget -->
          </div>
        </div>
        <!--end::Portlet-->
      </div>
    </div>
  </div>

  <!--begin: image modal -->
  <div class="modal fade" id="kt_modal_image" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form class="kt-form kt-form--label-right" name="brandForm" novalidate>
          <div class="modal-header">
            <h5 class="modal-title">上传文档图片</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            </button>
          </div>
          <div class="modal-body">
            <div class="kt-portlet__body">
              <div id="file-upload-image" class="fileUploadContent"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!--end: image modal -->

  <!--begin: document modal -->
  <div class="modal fade" id="kt_modal_document" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form class="kt-form kt-form--label-right" name="myForm" novalidate>
          <div class="modal-header">
            <h5 class="modal-title">上传PDF文档</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            </button>
          </div>
          <div class="modal-body">
            <div class="kt-portlet__body">
              <div id="file-upload-document" class="fileUploadContent"></div>
              <br>
              <input type="url" class="form-control" name="answerGitUrl" ng-model="model.answerGitUrl" placeholder="习题参考答案Git地址" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            <button type="button" class="btn btn-primary"
                    ng-disabled="myForm.answerGitUrl.$pristine || (myForm.answerGitUrl.$dirty && myForm.answerGitUrl.$invalid) || model.documentUrl.length === 0"
                    ng-click="onChangeDocumentList()" >确定</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!--end: document modal -->
</div>

<input type="hidden" value="{{exercisesType}}" id="hidden_exercisesType">
<input type="hidden" value="{{technologyName}}" id="hidden_technologyName">
<input type="hidden" value="{{learningPhaseName}}" id="hidden_learningPhaseName">
<input type="hidden" value="{{knowledgeName}}" id="hidden_knowledgeName">


<script src="../js/views/softwareExercisesUploadFiles.js" type="text/javascript"></script>
